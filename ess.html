<!DOCTYPE html>

<!--
 // WEBSITE: https://themefisher.com
 // TWITTER: https://twitter.com/themefisher
 // FACEBOOK: https://www.facebook.com/themefisher
 // GITHUB: https://github.com/themefisher/
-->

<html lang="zxx">

<head>
  <meta charset="utf-8">
  <title>GST</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <!-- ** Plugins Needed for the Project ** -->
  <!-- Bootstrap -->
  <link rel="stylesheet" href="plugins/bootstrap/bootstrap.min.css">
  <!-- themefy-icon -->
  <link rel="stylesheet" href="plugins/themify-icons/themify-icons.css">
  <!-- slick slider -->
  <link rel="stylesheet" href="plugins/slick/slick.css">
  <!-- venobox popup -->
  <link rel="stylesheet" href="plugins/Venobox/venobox.css">
  <!-- aos -->
  <link rel="stylesheet" href="plugins/aos/aos.css">

  <!-- Main Stylesheet -->
  <link href="css/style.css" rel="stylesheet">
  
  <!--Favicon-->
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
  <link rel="icon" href="images/favicon.ico" type="image/x-icon">
<style>
.survey-container {
    
    margin: 0 auto;
    padding: 20px;
    border: 1px solid #ccc;
    border-radius: 5px;
    
  }
  .question {
    font-size: 18px;
    margin-bottom: 10px;
  }
  .answer {
    margin-bottom: 10px;
  }
  .buttons {
    margin-top: 20px;
    text-align: right;
  }
  .buttons button {
    margin-left: 10px;
  }
  #resultsPage {
    display: none;
  }
  .red-element {
	color: red;
	text-align: center;
  }
  .yellow-element {
	color: yellow;
	text-align: center;
  }
  .green-element {
	color: green;
	text-align: center;
  }
  .span{
	text-align: center;
	margin: auto;
  }
</style>
</head>

<body>
  

<!-- navigation -->
<section class="fixed-top navigation">
  <div class="container">
    <nav class="navbar navbar-expand-lg navbar-light">
      <a class="navbar-brand" href="index.html"><img src="images/logo.png" alt="logo"></a>
      <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar"
        aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <!-- navbar -->
      <div class="collapse navbar-collapse text-center" id="navbar">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="index.html">Home</a>
          </li>
		  <li class="nav-item">
            <a class="nav-link page-scroll" href="training.html">Good Sleep Training</a>
          </li>
          <li class="nav-item">
            <a class="nav-link page-scroll" href="index.html#feature">Sleep Dignostic process</a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link page-scroll" href="index.html#sleepstudy">Sleep Terms</a>
          </li>
           <li class="nav-item">
            <a class="nav-link page-scroll" href="stopbang.html">STOP-BANG</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="contact.html">Contact</a>
          </li>
		  
        </ul>
       
      </div>
    </nav>
  </div>
</section>
<!-- /navigation -->

<!-- about us -->
<section class="section-lg about pb-0">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 text-center">
        <h2 class="section-title">ESS Test questionnaire</h2>
      </div>
	  <div class=" rounded bg-white p-4 shadow-primary text-center survey-container" id="surveyPage">
		<p class="mb-100">The Epworth Sleepiness Scale (ESS) is a questionnaire designed to assess daytime sleepiness. It consists of eight scenarios in which individuals rate their likelihood of dozing off or falling asleep. Each scenario is rated on a scale from 0 to 3, with 0 indicating no chance of dozing and 3 indicating a high chance of dozing.</p>
		<h4><span  id="questionNumberDisplay"></span></h4>
  
  <form id="surveyForm">
    <div class="question" id="questionContainer">	
      <!-- Questions will be inserted here dynamically -->
    </div>
    <div class="col-lg-12 text-center">
      <button class="btn btn-primary ml-lg-3 primary-shadow" type="button" id="prevBtn" onclick="prevQuestion()" style="display: none;">Previous</button>
      <button class="btn btn-primary ml-lg-3 primary-shadow" type="button" id="nextBtn" onclick="nextQuestion()">Next</button>
      <button class="btn btn-primary ml-lg-3 primary-shadow" type="submit" id="submitBtn" style="display: none;">Submit</button>
    </div>
  </form>
</div>

<div class="col-lg-12 text-center rounded bg-white p-4 shadow-primary survey-container" id="resultsPage">
  <h2 class="mb-100" >ESS Result</h2>
  <h4 class="mb-100" >Total Score: <span id="totalScore"></span></h2>
  <h2 class="section-title"><span  id="riskLeveltitle"></span></p>
  <p><span  id="riskLevel"></span></p>
  
  <p><span  id="note">Note: It's important to note that individual experiences of sleepiness can vary, and a thorough evaluation by a healthcare professional is necessary for accurate diagnosis and treatment recommendations.</span></p>
  
  <button class="btn btn-primary ml-lg-3 primary-shadow" onclick="restartSurvey()">Redo Test</button>
</div>

  </div>
  </div>
  <!-- background shapes -->
  <img src="images/background-shape/green-dot.png" alt="background-shape" class="about-bg-1 up-down-animation">
  <img src="images/background-shape/blue-dot.png" alt="background-shape" class="about-bg-2 left-right-animation">
  <img src="images/background-shape/green-half-cycle.png" alt="background-shape" class="about-bg-3 up-down-animation">
  <img src="images/background-shape/seo-ball-1.png" alt="background-shape" class="about-bg-4 left-right-animation">
  <img src="images/background-shape/team-bg-triangle.png" alt="background-shape" class="about-bg-5 up-down-animation">
  <img src="images/background-shape/service-half-cycle.png" alt="background-shape" class="about-bg-6 left-right-animation">
</section>
<!-- /about us -->

<!-- footer -->
<footer class="footer-section footer" style="background-image: url(images/backgrounds/footer-bg.png);">
  <div class="container">
    <div class="row">
      <div class="col-lg-4 text-center text-lg-left mb-4 mb-lg-0">
        <!-- logo -->
        <a href="index.html">
          <img class="img-fluid" src="images/logo.png" alt="logo">
        </a>
      </div>
      <!-- footer menu -->
      <nav class="col-lg-8 align-self-center mb-5">
        <ul class="list-inline text-lg-right text-center footer-menu">
          <li class="list-inline-item active"><a href="index.html">Home</a></li>
          <li class="list-inline-item"><a class="page-scroll" href="index.html#feature">Sleep Dignostic process</a></li>
          <li class="list-inline-item"><a class="page-scroll" href="index.html#sleepstudy">Sleep Terms</a></li>
          <li class="list-inline-item"><a href="stopbang.html">STOP-BANG</a></li>
          <li class="list-inline-item"><a href="contact.html">Contact</a></li>
		  <li class="list-inline-item"><a href="terms.html">Terms and Conditions</a></li>
		  <li class="list-inline-item"><a href="privacypolicy.html">Privacy Policy</a></li>
        </ul>
      </nav>
	  	  
	  
      <!-- footer social icon -->
      <nav class="col-12">
        <ul class="list-inline text-lg-right text-center social-icon">
          <li class="list-inline-item">
            <a class="facebook" href="#"><i class="ti-facebook"></i></a>
          </li>
          <li class="list-inline-item">
            <a class="twitter" href="#"><i class="ti-twitter-alt"></i></a>
          </li>
          <li class="list-inline-item">
            <a class="linkedin" href="#"><i class="ti-linkedin"></i></a>
          </li>
          <li class="list-inline-item">
            <a class="black" href="#"><i class="ti-github"></i></a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</footer>
<!-- /footer -->

<!-- jQuery -->
<script src="plugins/jQuery/jquery.min.js"></script>
<!-- Bootstrap JS -->
<script src="plugins/bootstrap/bootstrap.min.js"></script>
<!-- slick slider -->
<script src="plugins/slick/slick.min.js"></script>
<!-- venobox -->
<script src="plugins/Venobox/venobox.min.js"></script>
<!-- aos -->
<script src="plugins/aos/aos.js"></script>
<!-- Main Script -->
<script src="js/script.js"></script>
<script>
  var questions = [
    {
      question: "Would you fall asleep while sitting and reading?",
      options: [
        { value: "Would never doze", score: 0 },
        { value: "  Slight chance of dozing", score: 1 },
		{ value: "  Moderate chance of dozing", score: 2 },
		{ value: "  High chance of dozing", score: 3 }
      ],
	  image: "images/readingsleep.JPEG",
      answer: null
    },
    {
      question: "Would you fall asleep while watching TV?",
      options: [
         { value: "Would never doze", score: 0 },
        { value: "  Slight chance of dozing", score: 1 },
		{ value: "  Moderate chance of dozing", score: 2 },
		{ value: "  High chance of dozing", score: 3 }
      ],
	  image: "images/watchingsleep.JPEG",
      answer: null
    },
    {
      question: "Would you fall asleep while sitting in a public place?",
      options: [
         { value: "Would never doze", score: 0 },
        { value: "  Slight chance of dozing", score: 1 },
		{ value: "  Moderate chance of dozing", score: 2 },
		{ value: "  High chance of dozing", score: 3 }
      ], 
	  image: "images/public.JPG",
      answer: null
    },
    {
      question: "Would you fall asleep while being a passenger in a car for an hour without a break?",
      options: [
        { value: "Would never doze", score: 0 },
        { value: "  Slight chance of dozing", score: 1 },
		{ value: "  Moderate chance of dozing", score: 2 },
		{ value: "  High chance of dozing", score: 3 }
      ],
	  image: "images/passenger.JPG",
      answer: null
    },
    {
      question: "Would you fall asleep when lying down to rest in the afternoon?",
      options: [
        { value: "Would never doze", score: 0 },
        { value: "  Slight chance of dozing", score: 1 },
		{ value: "  Moderate chance of dozing", score: 2 },
		{ value: "  High chance of dozing", score: 3 }
      ],
	   image: "images/afterlunch.JPG",
      answer: null
    },
    {
      question: "Would you fall asleep while sitting and talking to someone?",
      options: [
        { value: "Would never doze", score: 0 },
        { value: "  Slight chance of dozing", score: 1 },
		{ value: "  Moderate chance of dozing", score: 2 },
		{ value: "  High chance of dozing", score: 3 }
      ],
	   image: "images/readingbook.JPG",
      answer: null
    },
	{
      question: "Would you fall asleep while sitting quietly after lunch without alcohol?",
      options: [
        { value: "Would never doze", score: 0 },
        { value: "  Slight chance of dozing", score: 1 },
		{ value: "  Moderate chance of dozing", score: 2 },
		{ value: "  High chance of dozing", score: 3 }
      ],
	  image: "images/sitquit.JPG",
      answer: null
    },
	{
      question: "Would you fall asleep in a car while stopped for a few minutes in traffic?",
      options: [
        { value: "Would never doze", score: 0 },
        { value: "  Slight chance of dozing", score: 1 },
		{ value: "  Moderate chance of dozing", score: 2 },
		{ value: "  High chance of dozing", score: 3 }
      ],
	   image: "images/driving.JPG",
      answer: null
    }
  ];

  var currentQuestion = 0;
  var totalQuestions = questions.length;
  var selectedAnswers = new Array(totalQuestions).fill(null);

  function showQuestion(questionNumber) {
    var questionContainer = document.getElementById('questionContainer');
    questionContainer.innerHTML = '';
    var currentQuestionObj = questions[questionNumber];
    var questionDiv = document.createElement('div');
    questionDiv.classList.add('question');

	// Create a paragraph element for the question text
	var questionText = document.createElement('h4');
	// Set the text content of the paragraph element
	questionText.textContent = currentQuestionObj.question;
	// Append the paragraph element to the questionDiv
	questionDiv.appendChild(questionText);	
	
// Create an image element
	var imageElement = document.createElement('img');
	// Set the source attribute to the URL of the image
	imageElement.src = currentQuestionObj.image; // Assuming currentQuestionObj.image contains the URL of the image
	imageElement.width = 200; // Set width to 200 pixels
	imageElement.height = 150; // Set height to 150 pixels
	imageElement.style.display = 'block';
	imageElement.style.margin = 'auto';
	// Append the image element to the questionDiv
	questionDiv.appendChild(imageElement);
	
    //questionDiv.textContent = currentQuestionObj.question;
    questionContainer.appendChild(questionDiv);

    currentQuestionObj.options.forEach(function(option, index) {
      var answerDiv = document.createElement('div');
      answerDiv.classList.add('answer');
      var input = document.createElement('input');
      input.type = 'radio';
      input.name = 'question' + questionNumber;
      input.id = 'option' + index;
      input.value = option.value;
      input.checked = option.value === selectedAnswers[questionNumber];
      var label = document.createElement('label');
      label.setAttribute('for', 'option' + index);
      label.textContent = option.value;
      answerDiv.appendChild(input);
      answerDiv.appendChild(label);
      questionContainer.appendChild(answerDiv);
    });

    if (questionNumber === 0) {
      document.getElementById('prevBtn').style.display = 'none';
    } else {
      document.getElementById('prevBtn').style.display = 'inline-block';
    }

    if (questionNumber === totalQuestions - 1) {
      document.getElementById('nextBtn').style.display = 'none';
      document.getElementById('submitBtn').style.display = 'inline-block';
    } else {
      document.getElementById('nextBtn').style.display = 'inline-block';
      document.getElementById('submitBtn').style.display = 'none';
    }
	
	 document.getElementById('questionNumberDisplay').textContent = (questionNumber + 1) + "/" + totalQuestions;
	 
	 document.getElementById('questionNumberDisplay').style.display = 'block';
	 document.getElementById('questionNumberDisplay').style.margin = 'auto';
  }

  function prevQuestion() {
    if (currentQuestion > 0) {
      currentQuestion--;
      showQuestion(currentQuestion);
    }
  }

  function nextQuestion() {
    if (currentQuestion < totalQuestions - 1) {
      var selectedOption = document.querySelector('input[name="question' + currentQuestion + '"]:checked');
      if (selectedOption) {
        selectedAnswers[currentQuestion] = selectedOption.value;
      }
      currentQuestion++;
      showQuestion(currentQuestion);
    }
  }

  function restartSurvey() {
    currentQuestion = 0;
    selectedAnswers.fill(null);
    document.getElementById('surveyPage').style.display = 'block';
    document.getElementById('resultsPage').style.display = 'none';
    showQuestion(currentQuestion);
  }
  
   function interpretRiskLevel(totalScore) {
    var riskLevelTitleElement = document.getElementById('riskLeveltitle');
	var riskLevelElement = document.getElementById('riskLevel');
	
	if (totalScore >= 0 && totalScore <= 5) {
      riskLevelTitleElement.textContent = "Low Risk"
      riskLevelElement.textContent = "Individuals with scores in this range typically have normal daytime sleepiness levels.";
	  riskLevelElement.style.color = "green";
	  riskLevelTitleElement.style.color = "green";
    } else if (totalScore >= 6 && totalScore <= 10) {
      riskLevelTitleElement.textContent = "Mild Risk"
      riskLevelElement.textContent = "Mild daytime sleepiness may be present. Individuals may feel slightly sleepy during certain situations but are generally alert and awake."
	  riskLevelElement.style.color = "yellow";
	  riskLevelTitleElement.style.color = "yellow";
    } else if (totalScore >= 11 && totalScore <= 15) {
      riskLevelTitleElement.textContent = "Moderate Risk"
      riskLevelElement.textContent = "Moderate daytime sleepiness is evident. Individuals may experience noticeable sleepiness and have an increased risk of dozing off in certain situations, particularly those that are sedentary or monotonous.";
	  riskLevelElement.style.color = "orange";
	  riskLevelTitleElement.style.color = "orange";
    } else if (totalScore >= 16) {
      riskLevelTitleElement.textContent = "Severe Risk"
      riskLevelElement.textContent = "Severe daytime sleepiness is present. Individuals may struggle to stay awake and alert during the day, experiencing frequent episodes of dozing off in various situations. This level of sleepiness can significantly impact daily functioning and may indicate the presence of a sleep disorder, such as sleep apnea or narcolepsy.";
	  riskLevelElement.style.color = "red";
	  riskLevelTitleElement.style.color = "red";
    } else {
        return "Invalid score";
    }
    
  }

  document.getElementById('surveyForm').addEventListener('submit', function(event) {
    event.preventDefault();
    var selectedOption = document.querySelector('input[name="question' + currentQuestion + '"]:checked');
    if (selectedOption) {
      selectedAnswers[currentQuestion] = selectedOption.value;
    }
    var totalScore = selectedAnswers.reduce(function(acc, answer, index) {
      return acc + questions[index].options.find(opt => opt.value === answer).score;
    }, 0);
    document.getElementById('surveyPage').style.display = 'none';
    document.getElementById('resultsPage').style.display = 'block';
    document.getElementById('totalScore').textContent = totalScore;
	interpretRiskLevel(totalScore);
    console.log('Selected answers:', selectedAnswers);
    console.log('Total Score:', totalScore);
    // You can perform further actions here, like submitting the form data via AJAX or storing it in a database
  });

  showQuestion(currentQuestion);
  
</script>

</body>
</html>
